{"ast":null,"code":"import { HttpClient } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"success\": a0,\n  \"error\": a1\n});\nfunction ProtectPdfPasswordComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"or click to browse\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Encrypt & Protect\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Encrypting...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 27);\n  }\n}\nfunction ProtectPdfPasswordComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx_r1.message.includes(\"\\u2705\"), ctx_r1.message.includes(\"\\u274C\")));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \" \");\n  }\n}\nexport let ProtectPdfPasswordComponent = /*#__PURE__*/(() => {\n  class ProtectPdfPasswordComponent {\n    http;\n    selectedFile = null;\n    password = '';\n    isLoading = false;\n    message = '';\n    constructor(http) {\n      this.http = http;\n    }\n    onFileSelected(event) {\n      debugger;\n      const input = event.target;\n      if (input.files?.length) {\n        const file = input.files[0];\n        if (file.type !== 'application/pdf') {\n          this.message = '❌ Please select a valid PDF file.';\n          this.selectedFile = null;\n          input.value = '';\n          return;\n        }\n        this.selectedFile = file;\n        this.message = '';\n      }\n    }\n    onSubmit() {\n      if (!this.selectedFile || !this.password) {\n        this.message = '❗ Please select a file and enter a password.';\n        return;\n      }\n      const formData = new FormData();\n      formData.append('file', this.selectedFile);\n      formData.append('password', this.password);\n      this.isLoading = true;\n      this.message = '';\n      this.http.post(`${environment.apiUrl}/protect-pdf-password`, formData, {\n        responseType: 'blob',\n        observe: 'response'\n      }).subscribe({\n        next: response => {\n          const blob = new Blob([response.body], {\n            type: 'application/pdf'\n          });\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement('a');\n          a.href = url;\n          const header = response.headers.get('Content-Disposition');\n          const match = header?.match(/filename=\"?([^\"]+)\"?/);\n          const filename = match ? match[1] : 'protected.pdf';\n          a.download = filename;\n          document.body.appendChild(a);\n          a.click();\n          document.body.removeChild(a);\n          window.URL.revokeObjectURL(url);\n          this.message = '✅ PDF protected and downloaded!';\n          this.resetForm();\n        },\n        error: err => {\n          console.error('❌ Error:', err);\n          this.message = err.error?.detail || '❌ Failed to protect PDF. Please try again.';\n          this.isLoading = false;\n        },\n        complete: () => {\n          this.isLoading = false;\n        }\n      });\n    }\n    resetForm() {\n      this.selectedFile = null;\n      this.password = '';\n      const input = document.getElementById('file');\n      if (input) input.value = '';\n    }\n    static ɵfac = function ProtectPdfPasswordComponent_Factory(t) {\n      return new (t || ProtectPdfPasswordComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProtectPdfPasswordComponent,\n      selectors: [[\"app-protect-pdf-password\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 29,\n      vars: 8,\n      consts: [[\"form\", \"ngForm\"], [1, \"glass-container-wrapper\"], [1, \"glass-container\"], [1, \"header\"], [1, \"title\"], [1, \"icon-lock\"], [1, \"subtitle\"], [1, \"protect-form\", 3, \"ngSubmit\"], [1, \"form-group\", \"file-drop-zone\", 3, \"dragover\", \"dragleave\", \"drop\"], [\"for\", \"file\", 1, \"file-label\"], [1, \"file-icon-wrapper\"], [1, \"icon-file-pdf\"], [1, \"file-text-wrapper\"], [1, \"file-main-text\"], [\"class\", \"file-sub-text\", 4, \"ngIf\"], [\"type\", \"file\", \"id\", \"file\", \"accept\", \".pdf\", \"required\", \"\", 3, \"change\"], [1, \"form-group\"], [1, \"password-input-wrapper\"], [1, \"icon-key\", \"input-icon\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Enter password\", 1, \"password-input\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", 1, \"submit-button\", 3, \"disabled\"], [1, \"button-content\"], [\"class\", \"button-text\", 4, \"ngIf\"], [\"class\", \"spinner\", 4, \"ngIf\"], [\"class\", \"message-toast\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"file-sub-text\"], [1, \"button-text\"], [1, \"spinner\"], [1, \"message-toast\", 3, \"ngClass\"]],\n      template: function ProtectPdfPasswordComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"h2\", 4);\n          i0.ɵɵelement(4, \"span\", 5);\n          i0.ɵɵtext(5, \" Secure Your PDF \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"p\", 6);\n          i0.ɵɵtext(7, \"Add a robust password to protect your file.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"form\", 7, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function ProtectPdfPasswordComponent_Template_form_ngSubmit_8_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onSubmit());\n          });\n          i0.ɵɵelementStart(10, \"div\", 8);\n          i0.ɵɵlistener(\"dragover\", function ProtectPdfPasswordComponent_Template_div_dragover_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDragOver($event));\n          })(\"dragleave\", function ProtectPdfPasswordComponent_Template_div_dragleave_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDragLeave($event));\n          })(\"drop\", function ProtectPdfPasswordComponent_Template_div_drop_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDrop($event));\n          });\n          i0.ɵɵelementStart(11, \"label\", 9)(12, \"div\", 10);\n          i0.ɵɵelement(13, \"span\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 12)(15, \"span\", 13);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, ProtectPdfPasswordComponent_span_17_Template, 2, 0, \"span\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"input\", 15);\n          i0.ɵɵlistener(\"change\", function ProtectPdfPasswordComponent_Template_input_change_18_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onFileSelected($event));\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(19, \"div\", 16)(20, \"div\", 17);\n          i0.ɵɵelement(21, \"span\", 18);\n          i0.ɵɵelementStart(22, \"input\", 19);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ProtectPdfPasswordComponent_Template_input_ngModelChange_22_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(23, \"button\", 20)(24, \"div\", 21);\n          i0.ɵɵtemplate(25, ProtectPdfPasswordComponent_span_25_Template, 2, 0, \"span\", 22)(26, ProtectPdfPasswordComponent_span_26_Template, 2, 0, \"span\", 22)(27, ProtectPdfPasswordComponent_div_27_Template, 1, 0, \"div\", 23);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(28, ProtectPdfPasswordComponent_div_28_Template, 2, 5, \"div\", 24);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(16);\n          i0.ɵɵtextInterpolate(ctx.selectedFile ? ctx.selectedFile.name : \"Drag & Drop PDF Here\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.selectedFile);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.isLoading || !ctx.selectedFile || !ctx.password);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.message);\n        }\n      },\n      dependencies: [FormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm, CommonModule, i3.NgClass, i3.NgIf],\n      styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\\\";[_ngcontent-%COMP%]:root{--primary-color: #4f46e5;--primary-hover: #4338ca;--background-color: #f9fafb;--container-bg: #ffffff;--text-color: #1f2937;--subtle-text: #6b7280;--border-color: #e5e7eb;--success-color: #10b981;--error-color: #ef4444;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}.protect-container[_ngcontent-%COMP%]{max-width:450px;margin:50px auto;padding:40px;background:var(--container-bg);border-radius:20px;box-shadow:var(--shadow-lg);font-family:Inter,sans-serif;animation:_ngcontent-%COMP%_fadeInFromBottom .8s cubic-bezier(.25,1,.5,1) forwards;position:relative;overflow:hidden}@keyframes _ngcontent-%COMP%_fadeInFromBottom{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.protect-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:35px}.lock-icon[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--primary-color);margin:0 auto 15px}.protect-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-color);margin:0 0 8px}.protect-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--subtle-text);font-size:1rem}.protect-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.form-group[_ngcontent-%COMP%]{position:relative}.file-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px;border:2px dashed var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease}.file-label[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);background-color:#f7f7fe}.file-label-text[_ngcontent-%COMP%]{color:var(--subtle-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:15px;font-weight:500}.file-icon[_ngcontent-%COMP%]{width:30px;height:30px;color:var(--primary-color)}input[type=file][_ngcontent-%COMP%]{display:none}.password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:15px;width:20px;height:20px;color:var(--subtle-text);transition:color .3s ease}.password-input[_ngcontent-%COMP%]{width:100%;padding:15px 15px 15px 50px;font-size:1rem;font-weight:500;border:1px solid var(--border-color);border-radius:12px;background-color:#fff;color:var(--text-color);transition:all .3s ease}.password-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4f46e533}.password-input[_ngcontent-%COMP%]:focus + .input-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.password-input[_ngcontent-%COMP%]::placeholder{color:var(--subtle-text)}.submit-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:16px;background:var(--primary-color);color:#fff;font-size:1rem;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;box-shadow:var(--shadow-sm)}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-hover);transform:translateY(-3px);box-shadow:0 8px 20px #4f46e540}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#d1d5db;cursor:not-allowed;transform:translateY(0)}.message[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding:12px;border-radius:10px;font-weight:600;font-size:.95rem;animation:_ngcontent-%COMP%_slideInUp .5s ease forwards}.message.success[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.message.error[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:3px solid rgba(255,255,255,.4);border-top-color:#fff;border-radius:50%;margin-right:12px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}\"]\n    });\n  }\n  return ProtectPdfPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}