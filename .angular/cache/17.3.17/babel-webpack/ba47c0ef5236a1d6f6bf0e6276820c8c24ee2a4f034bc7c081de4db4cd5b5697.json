{"ast":null,"code":"import { HttpClient } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction ProtectPdfPasswordComponent__svg_svg_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 21);\n    i0.ɵɵelement(1, \"path\", 22);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent__svg_svg_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 21);\n    i0.ɵɵelement(1, \"path\", 23);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Secure File\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProtectPdfPasswordComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 24);\n    i0.ɵɵtext(1, \" Securing... \");\n    i0.ɵɵelement(2, \"span\", 25);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let ProtectPdfPasswordComponent = /*#__PURE__*/(() => {\n  class ProtectPdfPasswordComponent {\n    http;\n    selectedFile = null;\n    password = '';\n    isLoading = false;\n    message = '';\n    constructor(http) {\n      this.http = http;\n    }\n    // Drag and Drop Handlers\n    onDragOver(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      const target = event.currentTarget;\n      target.classList.add('drag-over');\n    }\n    onDragLeave(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      const target = event.currentTarget;\n      target.classList.remove('drag-over');\n    }\n    onDrop(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      const target = event.currentTarget;\n      target.classList.remove('drag-over');\n      const files = event.dataTransfer?.files;\n      if (files && files.length > 0) {\n        this.handleFile(files[0]);\n      }\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files?.length) {\n        this.handleFile(input.files[0]);\n      }\n    }\n    handleFile(file) {\n      if (file.type !== 'application/pdf') {\n        this.displayMessage('❌ Please drop a valid PDF file.', true);\n        this.resetForm(false); // Keep password\n        return;\n      }\n      this.selectedFile = file;\n      this.message = '';\n    }\n    onSubmit() {\n      if (!this.selectedFile || !this.password) {\n        this.displayMessage('❗ Please select a file and enter a password.', true);\n        return;\n      }\n      const formData = new FormData();\n      formData.append('file', this.selectedFile);\n      formData.append('password', this.password);\n      this.isLoading = true;\n      this.message = '';\n      this.http.post(`${environment.apiUrl}/protect-pdf-password`, formData, {\n        responseType: 'blob',\n        observe: 'response'\n      }).subscribe({\n        next: response => {\n          const blob = new Blob([response.body], {\n            type: 'application/pdf'\n          });\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement('a');\n          a.href = url;\n          const header = response.headers.get('Content-Disposition');\n          const match = header?.match(/filename=\"?([^\"]+)\"?/);\n          const filename = match ? match[1] : 'protected.pdf';\n          a.download = filename;\n          document.body.appendChild(a);\n          a.click();\n          document.body.removeChild(a);\n          window.URL.revokeObjectURL(url);\n          this.displayMessage('✅ PDF protected and downloaded!');\n          this.resetForm();\n        },\n        error: err => {\n          console.error('❌ Error:', err);\n          this.displayMessage(err.error?.detail || '❌ Failed to protect PDF. Please try again.', true);\n          this.isLoading = false;\n        },\n        complete: () => {\n          this.isLoading = false;\n        }\n      });\n    }\n    displayMessage(msg, isError = false) {\n      this.message = msg;\n      // The animation is handled by CSS, but you could add a timer to clear the message\n      setTimeout(() => {\n        if (this.message === msg) {\n          this.message = '';\n        }\n      }, 4000); // Must match the animation duration in CSS\n    }\n    resetForm(fullReset = true) {\n      this.selectedFile = null;\n      if (fullReset) {\n        this.password = '';\n      }\n      const fileInput = document.getElementById('file');\n      if (fileInput) {\n        fileInput.value = '';\n      }\n    }\n    static ɵfac = function ProtectPdfPasswordComponent_Factory(t) {\n      return new (t || ProtectPdfPasswordComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProtectPdfPasswordComponent,\n      selectors: [[\"app-protect-pdf-password\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 29,\n      vars: 9,\n      consts: [[\"form\", \"ngForm\"], [1, \"protector-wrapper\"], [1, \"aurora-background\"], [1, \"aurora__item\"], [1, \"form-container\"], [1, \"form-header\"], [1, \"form-title\"], [1, \"form-subtitle\"], [1, \"protect-form\", 3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"file\", 1, \"file-input-label\", 3, \"dragover\", \"dragleave\", \"drop\"], [1, \"file-icon-container\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 4, \"ngIf\"], [1, \"file-input-text\"], [\"type\", \"file\", \"id\", \"file\", \"accept\", \".pdf\", \"required\", \"\", 3, \"change\"], [1, \"input-wrapper\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \" \", 1, \"form-input\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\", 1, \"input-label\"], [\"type\", \"submit\", 1, \"submit-button\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"loading-state\", 4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"loading-state\"], [1, \"spinner\"]],\n      template: function ProtectPdfPasswordComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n          i0.ɵɵelement(2, \"div\", 3)(3, \"div\", 3)(4, \"div\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"h2\", 6);\n          i0.ɵɵtext(8, \"Encrypt PDF\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"p\", 7);\n          i0.ɵɵtext(10, \"Secure your document with a powerful password.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"form\", 8, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function ProtectPdfPasswordComponent_Template_form_ngSubmit_11_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onSubmit());\n          });\n          i0.ɵɵelementStart(13, \"div\", 9)(14, \"label\", 10);\n          i0.ɵɵlistener(\"dragover\", function ProtectPdfPasswordComponent_Template_label_dragover_14_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDragOver($event));\n          })(\"dragleave\", function ProtectPdfPasswordComponent_Template_label_dragleave_14_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDragLeave($event));\n          })(\"drop\", function ProtectPdfPasswordComponent_Template_label_drop_14_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onDrop($event));\n          });\n          i0.ɵɵelementStart(15, \"div\", 11);\n          i0.ɵɵtemplate(16, ProtectPdfPasswordComponent__svg_svg_16_Template, 2, 0, \"svg\", 12)(17, ProtectPdfPasswordComponent__svg_svg_17_Template, 2, 0, \"svg\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"span\", 13);\n          i0.ɵɵtext(19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"input\", 14);\n          i0.ɵɵlistener(\"change\", function ProtectPdfPasswordComponent_Template_input_change_20_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onFileSelected($event));\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(21, \"div\", 9)(22, \"div\", 15)(23, \"input\", 16);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function ProtectPdfPasswordComponent_Template_input_ngModelChange_23_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"label\", 17);\n          i0.ɵɵtext(25, \"Enter Password\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"button\", 18);\n          i0.ɵɵtemplate(27, ProtectPdfPasswordComponent_span_27_Template, 2, 0, \"span\", 19)(28, ProtectPdfPasswordComponent_span_28_Template, 3, 0, \"span\", 20);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(14);\n          i0.ɵɵclassProp(\"active\", ctx.selectedFile);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.selectedFile);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedFile);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.selectedFile ? ctx.selectedFile.name : \"Drag & Drop a PDF file\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", ctx.isLoading || !ctx.selectedFile || !ctx.password);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        }\n      },\n      dependencies: [FormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm, CommonModule, i3.NgIf],\n      styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap\\\";body[_ngcontent-%COMP%]{background:#111827;background-image:radial-gradient(at 47% 33%,hsl(162,77%,40%) 0,transparent 59%),radial-gradient(at 82% 65%,hsl(218,39%,35%) 0,transparent 55%);min-height:100vh;display:flex;align-items:center;justify-content:center}[_ngcontent-%COMP%]:root{--font-family: \\\"Manrope\\\", sans-serif;--text-color: #ffffff;--subtle-text: #e5e7eb99;--accent-color: #2dd4bf;--accent-hover: #5eead4;--error-color: #fb7185;--success-color: #4ade80}.icon-lock[_ngcontent-%COMP%]:before{content:\\\"\\\\1f512\\\";margin-right:10px}.icon-file-pdf[_ngcontent-%COMP%]:before{content:\\\"\\\\1f4c4\\\"}.icon-key[_ngcontent-%COMP%]:before{content:\\\"\\\\1f511\\\"}.glass-container-wrapper[_ngcontent-%COMP%]{perspective:1000px}.glass-container[_ngcontent-%COMP%]{width:420px;padding:35px;font-family:var(--font-family);background:#1f293780;backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border-radius:24px;border:1px solid rgba(255,255,255,.125);box-shadow:0 8px 32px #0000005e;color:var(--text-color);animation:_ngcontent-%COMP%_floatIn 1s cubic-bezier(.25,1,.5,1) forwards;transition:transform .6s cubic-bezier(.22,1,.36,1)}.glass-container[_ngcontent-%COMP%]:hover{transform:rotateX(5deg) rotateY(-5deg) scale(1.02)}@keyframes _ngcontent-%COMP%_floatIn{0%{opacity:0;transform:translateY(50px) rotateX(15deg)}to{opacity:1;transform:translateY(0) rotateX(0)}}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:800;margin:0 0 10px;display:flex;align-items:center;justify-content:center}.subtitle[_ngcontent-%COMP%]{font-size:1rem;color:var(--subtle-text);margin:0}.protect-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:22px}.file-drop-zone[_ngcontent-%COMP%]{border:2px dashed rgba(255,255,255,.2);border-radius:16px;padding:25px;text-align:center;cursor:pointer;transition:all .3s ease}.file-drop-zone.drag-over[_ngcontent-%COMP%]{border-color:var(--accent-color);background-color:#2dd4bf1a}.file-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;cursor:pointer}.file-icon-wrapper[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--accent-color);transition:transform .3s ease}.file-drop-zone[_ngcontent-%COMP%]:hover   .file-icon-wrapper[_ngcontent-%COMP%]{transform:scale(1.1) rotate(-10deg)}.file-text-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.file-main-text[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--text-color)}.file-sub-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--subtle-text)}input[type=file][_ngcontent-%COMP%]{display:none}.password-input-wrapper[_ngcontent-%COMP%]{position:relative}.input-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:18px;transform:translateY(-50%);color:var(--subtle-text)}.password-input[_ngcontent-%COMP%]{width:100%;padding:16px 16px 16px 50px;background:#111827b3;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:var(--text-color);font-size:1rem;font-weight:500;transition:all .3s ease}.password-input[_ngcontent-%COMP%]::placeholder{color:var(--subtle-text)}.password-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 15px #2dd4bf4d}.submit-button[_ngcontent-%COMP%]{padding:16px;font-size:1.05rem;font-weight:700;color:#111827;background-color:var(--accent-color);border:none;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(.25,1,.5,1);box-shadow:0 4px 20px #2dd4bf33}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--accent-hover);transform:translateY(-4px);box-shadow:0 8px 25px #2dd4bf4d}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#374151cc;color:#9ca3af;cursor:not-allowed;box-shadow:none}.button-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(23,32,53,.3);border-top-color:#111827;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-left:12px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.message-toast[_ngcontent-%COMP%]{position:absolute;bottom:-70px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:10px;font-weight:600;box-shadow:0 4px 15px #0003;animation:_ngcontent-%COMP%_slideInAndOut 4s forwards}.message-toast.success[_ngcontent-%COMP%]{background-color:var(--success-color);color:#111827}.message-toast.error[_ngcontent-%COMP%]{background-color:var(--error-color);color:#fff}@keyframes _ngcontent-%COMP%_slideInAndOut{0%{bottom:-70px;opacity:0}15%{bottom:30px;opacity:1}85%{bottom:30px;opacity:1}to{bottom:-70px;opacity:0}}\"]\n    });\n  }\n  return ProtectPdfPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}